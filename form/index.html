<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://getbootstrap.com/docs/5.2/assets/css/docs.css"
      rel="stylesheet"
    />
    <title>PSG Golden Ticket Form</title>
    <link rel="shortcut icon" href="//cdn.shopify.com/s/files/1/0316/2387/2648/files/Meeple_32x32.png?v=1659047483" type="image/png">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  </head>
  <body class="py-lg-5 py-md-5 py-sm-5 m-0 border-0 bg-dark bd-example">
    <script
    type="text/javascript"
    src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.1.0/papaparse.min.js"
  ></script>
  <script type="text/javascript">
    var public_spreadsheet_url =
      "https://docs.google.com/spreadsheets/d/1YC4vzjepcRs5wcna0ZZFEPCcWJHKru-iZzKY3uWwuE4/pub?output=csv";

    function init() {
      Papa.parse(public_spreadsheet_url, {
        download: true,
        header: true,
        complete: showInfo,
      });
    }
    
    window.addEventListener("DOMContentLoaded", init);

    function showInfo(results) {
      var data = results.data;

      // data comes through as a simple array since simpleSheet is turned on
      document.getElementById("food").innerHTML =
        "<strong>Last Updated:</strong> " +
        [data[0].Timestamp];
      console.log(data);
    }
</script>
<body>
    <div class="col-md-7 col-lg-8">
        <form>
            <div class="row g-3 mb-3">
                <div class="col-sm-6">
                <label for="Name" class="form-label text-white">What's Your Name?</label>
                <input type="text" class="form-control" id="firstName" name="entry.1293020548" placeholder="John Doe" value="" required>
                </div>
            </div>
            <div class="mb-3 row">
            <label for="GameSystem" class="form-label text-white py-3">What Game System?</label>
            <div class="px-3" id="GameSystem">
                <div class="form-check">
                <input id="MTGC" name="System" type="radio" class="form-check-input" value="mtgc" name="entry.1907545839" checked required>
                <label class="form-check-label text-white">MTG: Commander</label>
                </div>
                <div class="form-check">
                <input id="YGOH" name="System" type="radio" class="form-check-input" value="yugioh" name="entry.1907545839" required>
                <label class="form-check-label text-white">Yu-Gi-Oh!</label>
                </div>
                <div class="form-check">
                <input id="WRHMR40K" name="System" type="radio" class="form-check-input"  value="warhammer" name="entry.1907545839" required>
                <label class="form-check-label text-white">Warhammer 40,000</label>
                </div>
                <div class="form-check">
                    <input id="BRDGMS" name="System" type="radio" class="form-check-input" value="boardgames" name="entry.1907545839" required>
                    <label class="form-check-label text-white">Board Games</label>
                </div>
                <div class="form-check">
                    <input id="DANDD" name="System" type="radio" class="form-check-input" value="dungeonsanddragons" name="entry.1907545839" required>
                    <label class="form-check-label text-white">Dungeons and Dragons</label>
                </div>
                <div class="form-check">
                    <input id="VNGRD" name="System" type="radio" class="form-check-input" value="cardfight" name="entry.1907545839" required>
                    <label class="form-check-label text-white">Cardfight! Vanguard</label>
                </div>
                <div class="form-check">
                    <input id="PATHFNDR" name="System" type="radio" class="form-check-input" value="pathfinder" name="entry.1907545839" required>
                    <label class="form-check-label text-white">Pathfinder</label>
                </div>
            </div>
            </div>
            <div class="row g-3  mb-3">
                <div class="col-sm-6">
                    <label for="racecode" class="form-label text-white">Race Code</label>
                    <input type="text" class="form-control" id="racecode" name="entry.2130424561" placeholder="COM01" value="" required>
                    <div id="racecodehelp" class="form-text text-warning">See race board for accurate code.</div>
                </div>
                <div class="col-sm-6">
                    <label for="staff" class="form-label text-white">Staff Member Witness</label>
                    <input type="text" class="form-control" id="staffcode" name="entry.1147166433" placeholder="Peter Piper" value="" required>
                    <div id="staffhelp" class="form-text text-warning">ProSoul Staff who Witnessed your Achievement</div>
                </div>
            </div>
            <div class="col-sm-6 mb-3">
                <label for="email" class="form-label text-white">Email/Phone Number:</label>
                <input type="text" class="form-control" id="phoneoremail" name="entry.1924036158" placeholder="you@example.com" value="" required>
                <div id="emailhelp" class="form-text text-warning">Just in case we have any questions about your advancement.</div>
            </div>
            <button type="submit" id="submit" class="btn btn-primary">Submit</button>
        </form>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>
  $(function() {
    $('#submit').on('click', function() {
      
      // name
      var name = $('#Name').val() || 'no set';

      // gender
      var system = function() {
        var v;
        $('[name="entry.1907545839"]').each(function() {
          if($(this).prop('checked') === true) v = $(this).val();
        });
        return v;
      };

      // question 1 
      var question = $('#racecode').val() || 'no set';

      // question 2 
      var question = $('#staffcode').val() || 'no set';

      // question 3
      var question = $('#phoneoremail').val() || 'no set';

      // post
      var data = {
        'entry.1293020548': name,
        'entry.1907545839': system(),
        'entry.2130424561': racecode,
        'entry.1147166433': staffcode,
        'entry.1924036158': phoneoremail
      };
      $.ajax({
        type: 'POST',
        url: 'https://docs.google.com/forms/d/19CyjMEhOzM6WLfulBw0RBWFgimBKltKFWl6wXg_lXhg/formResponse',
        data: data,
        contentType: 'application/json',
        dataType: 'jsonp',
        complete: function() {
          alert('send success');
        }
      });
      
    });
  });
</script>
</body>
</html>
